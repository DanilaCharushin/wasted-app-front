(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d208333"],{a47a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t.loading?a("Loader"):a("div",[a("h4",[t._v("Список учреждений")]),a("DistrictList",{attrs:{districts:t.districts}}),a("br"),a("div",{staticClass:"q-gutter-md"},[a("button",{staticClass:"btn waves-effect waves-light",on:{click:function(e){t.dialog=!0}}},[t._v(" Мастер выгрузки ")]),a("button",{staticClass:"btn waves-effect waves-light",on:{click:t.toCreateSchool}},[t._v(" Добавить учреждение ")])]),a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("q-card",{staticClass:"bg-teal-7 text-white"},[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("Мастер выгрузки")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",dense:""}})],1),a("q-separator",{attrs:{color:"teal-10"}}),a("q-card-section",{staticClass:"q-pt-md-lg"},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-xs row inline items-baseline"},[a("div",{staticClass:"text"},[t._v("Поля")]),a("div",{staticClass:"column"},[a("q-checkbox",{staticClass:"col",attrs:{label:"Основные сведения",color:"orange"},model:{value:t.isMainInfo,callback:function(e){t.isMainInfo=e},expression:"isMainInfo"}}),t.isMainInfo?a("div",{staticClass:"col",staticStyle:{height:"250px",width:"250px"}},t._l(t.mainInfo,(function(e,s,r){return a("q-checkbox",{key:r,staticClass:"col",attrs:{color:"orange",label:e,value:t.mainStates[s]},model:{value:t.mainStates[s],callback:function(e){t.$set(t.mainStates,s,e)},expression:"mainStates[key]"}})})),1):t._e()],1),a("div",{staticClass:"column inline items-baseline"},[a("q-checkbox",{staticClass:"col",attrs:{label:"Cведения о здании",color:"orange"},model:{value:t.isBuildInfo,callback:function(e){t.isBuildInfo=e},expression:"isBuildInfo"}}),t.isBuildInfo?a("div",{staticClass:"col",staticStyle:{height:"250px",width:"250px"}},t._l(t.buildInfo,(function(e,s){return a("q-checkbox",{key:s,staticClass:"col",attrs:{color:"orange",label:e,value:t.buildStates[s]},model:{value:t.buildStates[s],callback:function(e){t.$set(t.buildStates,s,e)},expression:"buildStates[key]"}})})),1):t._e()],1),t.isBuildInfo?a("div",{staticClass:"column inline items-baseline"},[a("q-checkbox",{staticClass:"col",attrs:{label:"Температурный режим",color:"orange"},model:{value:t.isTempInfo,callback:function(e){t.isTempInfo=e},expression:"isTempInfo"}}),t.isTempInfo?a("div",{staticClass:"col",staticStyle:{height:"250px",width:"250px"}},[a("q-input",{class:{invalid:t.dateStart>(new Date).toISOString().substr(0,10)},attrs:{filled:"",type:"date",hint:"Начало периода",autofocus:"","error-message":t.dateStart>(new Date).toISOString().substr(0,10)?"Некорректная дата!":"",error:t.dateStart>(new Date).toISOString().substr(0,10)},model:{value:t.dateStart,callback:function(e){t.dateStart=e},expression:"dateStart"}}),a("q-input",{class:{invalid:t.dateEnd>(new Date).toISOString().substr(0,10)||t.dateEnd<t.dateStart},attrs:{filled:"",type:"date",hint:"Конец периода",autofocus:"","error-message":t.dateEnd>(new Date).toISOString().substr(0,10)||t.dateEnd<t.dateStart?"Некорректная дата!":"",error:t.dateEnd>(new Date).toISOString().substr(0,10)||t.dateEnd<t.dateStart},model:{value:t.dateEnd,callback:function(e){t.dateEnd=e},expression:"dateEnd"}}),a("q-checkbox",{staticClass:"col",attrs:{label:"Температура подающего трубопровода",color:"orange"},model:{value:t.coolant_forward_temperature,callback:function(e){t.coolant_forward_temperature=e},expression:"coolant_forward_temperature"}}),a("q-checkbox",{staticClass:"col",attrs:{label:"Температура обратного трубопровода",color:"orange"},model:{value:t.coolant_backward_temperature,callback:function(e){t.coolant_backward_temperature=e},expression:"coolant_backward_temperature"}}),a("q-checkbox",{staticClass:"col",attrs:{label:"Давление на обратном трубопроводе",color:"orange"},model:{value:t.forward_pressure,callback:function(e){t.forward_pressure=e},expression:"forward_pressure"}}),a("q-checkbox",{staticClass:"col",attrs:{label:"Давление на обратном трубопроводе",color:"orange"},model:{value:t.backward_pressure,callback:function(e){t.backward_pressure=e},expression:"backward_pressure"}}),a("q-checkbox",{staticClass:"col",attrs:{label:"Температурный воздуха",color:"orange"},model:{value:t.air_temperature,callback:function(e){t.air_temperature=e},expression:"air_temperature"}})],1):t._e()],1):t._e()]),a("br"),a("div",{staticClass:"q-gutter-xs row inline items-baseline"},[a("div",{staticClass:"text"},[t._v("Фильтры")]),a("div",{staticClass:"column inline items-baseline"},[a("q-checkbox",{staticClass:"col",attrs:{label:"Районы",color:"orange"},model:{value:t.isDistrictInfo,callback:function(e){t.isDistrictInfo=e},expression:"isDistrictInfo"}}),t.isDistrictInfo?a("div",{staticClass:"col",staticStyle:{height:"250px",width:"250px"}},t._l(t.districtInfo,(function(e,s){return a("q-checkbox",{key:s,staticClass:"col",attrs:{color:"orange",label:e,value:t.districtStates[s]},model:{value:t.districtStates[s],callback:function(e){t.$set(t.districtStates,s,e)},expression:"districtStates[key]"}})})),1):t._e()],1)])]),a("button",{staticClass:"btn waves-effect waves-light",on:{click:function(e){return e.preventDefault(),t.sendInfo(e)}}},[t._v(" Послать ")])])],1)],1)],1)],1)],1)},r=[],i=(a("b64b"),a("96cf"),a("1da1")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",t._l(t.districts,(function(e){return a("li",{key:e.name["id"]},[a("q-expansion-item",{attrs:{label:e.name["name"]}},t._l(e["schools"],(function(e){return a("router-link",{key:e["INN"],attrs:{to:"/schoolcard/"+e["INN"]}},[t._v(" "+t._s(e["shortname"])+" "),a("br")])})),1)],1)})),0)])},o=[],c=(a("4160"),a("b0c0"),a("159b"),{data:function(){return{distrs:[]}},props:{districts:{type:Array}},name:"DistrictList",created:function(){var t=this;this.districts.forEach((function(e){t.distrs.push(e.name["name"])}))}}),l=c,d=a("2877"),u=a("fe09"),p=Object(d["a"])(l,n,o,!1,null,"64fe8282",null),f=p.exports;p.options.components=Object.assign(Object.create(p.options.components||null),p.options.components||{},{QExpansionItem:u["h"]});var b={name:"Districts",components:{DistrictList:f},data:function(){return{districts:[],test:[],mainInfo:{},buildInfo:{},districtInfo:{},mainStates:{},buildStates:{},districtStates:{},isMainInfo:!1,isTempInfo:!1,isBuildInfo:!1,isDistrictInfo:!1,loading:!0,error:!1,dialog:!1,dateStart:"",dateEnd:(new Date).toISOString().substr(0,10)||"",coolant_forward_temperature:!0,coolant_backward_temperature:!0,backward_pressure:!0,forward_pressure:!0,air_temperature:!0,model:{}}},methods:{exportData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("exportInfo");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},sendInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a={},t.isBuildInfo&&(a["building"]=t.buildStates),t.isMainInfo&&(a["school"]=t.mainStates),t.isTempInfo&&(a["temperature"]={start:t.dateStart,end:t.dateEnd,air_temperature:t.air_temperature,coolant_forward_temperature:t.coolant_forward_temperature,coolant_backward_temperature:t.coolant_backward_temperature,forward_pressure:t.forward_pressure,backward_pressure:t.backward_pressure}),t.isDistrictInfo&&(a["filters"]={},a["filters"]["district"]=t.districtStates),Object.keys(a).length&&(t.isMainInfo||t.isBuildInfo)){e.next=10;break}alert("Для отправки выберите поля!"),e.next=12;break;case 10:return e.next=12,t.$store.dispatch("sendMainInfo",a);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))()},toCreateSchool:function(){this.$router.push("/create_school")}},beforeCreate:function(){var t=localStorage.getItem("permission");t>10&&(alert("У вас недостаточно прав!"),this.$router.push("/"))},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,localStorage.getItem("currentINN")&&localStorage.removeItem("currentINN"),e.next=4,t.$store.dispatch("fetchDistricts");case 4:return t.districts=e.sent,e.next=7,t.$store.dispatch("fetchFieldsBuilding");case 7:return t.buildInfo=e.sent,e.next=10,t.$store.dispatch("fetchFieldsDistricts");case 10:return t.districtInfo=e.sent,e.next=13,t.$store.dispatch("fetchFieldsSchool");case 13:for(a in t.mainInfo=e.sent,t.districtInfo=t.districtInfo["district"],t.districtStates=Object.assign({},t.districtInfo),t.districtStates)t.districtStates[a]=!0;for(s in t.mainStates=Object.assign({},t.mainInfo),t.mainStates)t.mainStates[s]=!0;for(r in t.buildStates=Object.assign({},t.buildInfo),t.buildInfo)t.buildStates[r]=!0;t.loading=!1,e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](0),console.log(e.t0),t.error=!0;case 28:case"end":return e.stop()}}),e,null,[[0,24]])})))()}},m=b,h=Object(d["a"])(m,s,r,!1,null,"2f192e98",null);e["default"]=h.exports;h.options.components=Object.assign(Object.create(h.options.components||null),h.options.components||{},{QDialog:u["g"],QCard:u["c"],QCardSection:u["e"],QSpace:u["r"],QBtn:u["b"],QSeparator:u["q"],QCheckbox:u["f"],QInput:u["j"]}),h.options.directives=Object.assign(Object.create(h.options.directives||null),h.options.directives||{},{ClosePopup:u["a"]})}}]);
//# sourceMappingURL=chunk-2d208333.5d56f934.js.map