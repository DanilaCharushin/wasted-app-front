(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d208333"],{a47a:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.loading?s("Loader"):s("div",[s("h4",[t._v("Список учреждений")]),s("DistrictList",{attrs:{districts:t.districts}}),s("br"),s("div",{staticClass:"q-gutter-md"},[s("button",{staticClass:"btn waves-effect waves-light",on:{click:t.exportData}},[t._v(" Экспорт данных ")]),s("button",{staticClass:"btn waves-effect waves-light",on:{click:function(e){t.dialog=!0}}},[t._v(" Мастер выгрузки ")]),s("button",{staticClass:"btn waves-effect waves-light",on:{click:t.toCreateSchool}},[t._v(" Добавить учреждение ")])]),s("div",{staticClass:"q-pa-md q-gutter-sm"},[s("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("q-card",{staticClass:"bg-teal-7 text-white"},[s("q-card-section",{staticClass:"row items-center q-pb-none"},[s("div",{staticClass:"text-h6"},[t._v("Мастер выгрузки")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",dense:""}})],1),s("q-separator",{attrs:{color:"teal-10"}}),s("q-card-section",{staticClass:"q-pt-md-lg"},[s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"q-gutter-xs row inline items-baseline"},[s("div",{staticClass:"column"},[s("q-checkbox",{staticClass:"col",attrs:{label:"Основные сведения",color:"orange"},model:{value:t.isMainInfo,callback:function(e){t.isMainInfo=e},expression:"isMainInfo"}}),t.isMainInfo?s("div",{staticClass:"col",staticStyle:{height:"250px",width:"250px"}},t._l(t.mainInfo,(function(e,n,a){return s("q-checkbox",{key:a,staticClass:"col",attrs:{color:"orange",label:e,value:t.mainStates[n]},model:{value:t.mainStates[n],callback:function(e){t.$set(t.mainStates,n,e)},expression:"mainStates[key]"}})})),1):t._e()],1),s("div",{staticClass:"column inline items-baseline"},[s("q-checkbox",{staticClass:"col",attrs:{label:"Cведения о здании",color:"orange"},model:{value:t.isBuildInfo,callback:function(e){t.isBuildInfo=e},expression:"isBuildInfo"}}),t.isBuildInfo?s("div",{staticClass:"col",staticStyle:{height:"250px",width:"250px"}},t._l(t.buildInfo,(function(e,n){return s("q-checkbox",{key:n,staticClass:"col",attrs:{color:"orange",label:e,value:t.buildStates[n]},model:{value:t.buildStates[n],callback:function(e){t.$set(t.buildStates,n,e)},expression:"buildStates[key]"}})})),1):t._e()],1)])]),s("button",{staticClass:"btn waves-effect waves-light",on:{click:function(e){return e.preventDefault(),t.sendInfo(e)}}},[t._v(" Послать ")])])],1)],1)],1)],1)],1)},a=[],i=(s("b64b"),s("96cf"),s("1da1")),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",t._l(t.districts,(function(e){return s("li",{key:e.name["id"]},[s("q-expansion-item",{attrs:{label:e.name["name"]}},t._l(e["schools"],(function(e){return s("router-link",{key:e["INN"],attrs:{to:"/schoolcard/"+e["INN"]}},[t._v(" "+t._s(e["shortname"])+" "),s("br")])})),1)],1)})),0)])},c=[],r=(s("4160"),s("b0c0"),s("159b"),{data:function(){return{distrs:[]}},props:{districts:{type:Array}},name:"DistrictList",created:function(){var t=this;this.districts.forEach((function(e){t.distrs.push(e.name["name"])}))}}),l=r,u=s("2877"),d=s("fe09"),p=Object(u["a"])(l,o,c,!1,null,"64fe8282",null),f=p.exports;p.options.components=Object.assign(Object.create(p.options.components||null),p.options.components||{},{QExpansionItem:d["g"]});var b={name:"Districts",components:{DistrictList:f},data:function(){return{districts:[],test:[],mainInfo:{},buildInfo:{},mainStates:{},buildStates:{},isMainInfo:!1,isBuildInfo:!1,loading:!0,error:!1,dialog:!1,maximizedToggle:!1}},methods:{exportData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("exportInfo");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},show:function(){console.log("nevizhy"),console.log(this.mainStates)},sendInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,s={},t.isBuildInfo&&(s["building"]=t.buildStates),t.isMainInfo&&(s["school"]=t.mainStates),console.log(s),Object.keys(s).length){e.next=9;break}alert("Для отправки выберите поля!"),e.next=11;break;case 9:return e.next=11,t.$store.dispatch("sendMainInfo",s);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},toCreateSchool:function(){this.$router.push("/create_school")}},beforeCreate:function(){var t=localStorage.getItem("permission");"5"!==t&&"1"!==t&&"10"!==t&&(alert("У вас недостаточно прав!"),this.$router.push("/"))},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("fetchDistricts");case 3:return t.districts=e.sent,e.next=6,t.$store.dispatch("fetchFieldsBuilding");case 6:return t.buildInfo=e.sent,e.next=9,t.$store.dispatch("fetchAllModels");case 9:return e.next=11,t.$store.dispatch("fetchFieldsSchool");case 11:for(s in t.mainInfo=e.sent,t.mainStates=Object.assign({},t.mainInfo),t.mainStates)t.mainStates[s]=!0;for(n in t.buildStates=Object.assign({},t.buildInfo),t.buildInfo)t.buildStates[n]=!0;t.loading=!1,e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](0),console.log(e.t0),t.error=!0;case 23:case"end":return e.stop()}}),e,null,[[0,19]])})))()}},h=b,m=Object(u["a"])(h,n,a,!1,null,"5b704012",null);e["default"]=m.exports;m.options.components=Object.assign(Object.create(m.options.components||null),m.options.components||{},{QDialog:d["f"],QCard:d["c"],QCardSection:d["d"],QSpace:d["p"],QBtn:d["b"],QSeparator:d["o"],QCheckbox:d["e"]}),m.options.directives=Object.assign(Object.create(m.options.directives||null),m.options.directives||{},{ClosePopup:d["a"]})}}]);
//# sourceMappingURL=chunk-2d208333.3f38838f.js.map