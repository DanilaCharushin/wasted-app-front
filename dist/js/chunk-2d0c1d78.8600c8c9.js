(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c1d78"],{4886:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e.loading?n("Loader"):n("div",[n("h3",[e._v("Категория "+e._s(e.nameCategory))]),n("div",{staticClass:"center container"},[n("h5",[e._v("Добавление")]),n("div",{staticClass:"q-gutter-sm row"},[n("q-input",{attrs:{type:"text",placeholder:"Введите название"},model:{value:e.newWasteName,callback:function(t){e.newWasteName=t},expression:"newWasteName"}}),n("q-input",{attrs:{type:"text",placeholder:"Введите сумму"},model:{value:e.newAmount,callback:function(t){e.newAmount=t},expression:"newAmount"}}),n("button",{staticClass:"btn waves-effect green lighten-1",on:{click:function(t){return t.preventDefault(),e.createNewWaste(t)}}},[e._v("Добавить трату ")])],1)]),e.allWastes.length?n("div",{staticClass:"center container"},[n("h5",[e._v("Удаление")]),n("div",{},[n("q-input",{attrs:{type:"text",placeholder:"Введите название"},scopedSlots:e._u([{key:"append",fn:function(){return[n("button",{staticClass:"btn waves-effect red lighten-1",on:{click:function(t){return t.preventDefault(),e.deleteWaste(t)}}},[e._v("Удалить трату ")])]},proxy:!0}],null,!1,509625532),model:{value:e.deletedName,callback:function(t){e.deletedName=t},expression:"deletedName"}})],1)]):e._e(),e.allWastes.length?n("q-table",{attrs:{data:e.allWastes,columns:e.columns,dense:"","row-key":"name","no-data-label":"I didn't find anything for you",selection:"single",selected:e.selected},on:{"update:selected":function(t){e.selected=t}}}):n("h5",{staticClass:"center"},[e._v("Траты в данной категории отсутствуют")]),n("div",[n("button",{staticClass:"btn waves-effect red lighten-1",on:{click:function(t){return t.preventDefault(),e.deleteCategory(t)}}},[e._v("Удалить категорию ")])])],1)],1)},r=[],s=n("b85c"),c=n("1da1"),l=(n("7db0"),n("d3b7"),n("b0c0"),n("4de4"),n("96cf"),{name:"CreateCategory",props:["id","categories"],data:function(){return{loading:!0,selectedCategoryId:null,newWasteName:"",deletedName:"",nameCategory:"",newAmount:null,allWastes:[],selected:[],wastes:[],columns:[{name:"name",label:"Трата",align:"left",field:"name",required:!0},{name:"amount",align:"center",label:"Сумма",field:"amount",sortable:!0},{name:"created_at",align:"center",label:"Дата",field:"created_at",format:function(e){return new Date(e).toUTCString()}}]}},methods:{createNewWaste:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={category_id:e.id,name:e.newWasteName,amount:e.newAmount},t.prev=1,t.next=4,e.$store.dispatch("createWaste",n);case 4:a=t.sent,console.log(a),e.allWastes.push(a),e.$message("Трата успешно записана!"),e.newWasteName="",e.newAmount=null,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),e.$message("Произошла ошибка!");case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()},deleteCategory:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,n=Object(s["a"])(e.allWastes),t.prev=2,n.s();case 4:if((a=n.n()).done){t.next=10;break}return r=a.value,t.next=8,e.$store.dispatch("deleteWaste",r.id);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:return t.next=20,e.$store.dispatch("deleteCategory",e.id);case 20:return e.$message("Категория успешно удалена!"),e.$emit("update"),t.next=24,e.$router.push("/");case 24:t.next=30;break;case 26:t.prev=26,t.t1=t["catch"](0),e.$message("Произошла ошибка!"),console.log(t.t1);case 30:case"end":return t.stop()}}),t,null,[[0,26],[2,12,15,18]])})))()},deleteWaste:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=e.allWastes.find((function(t){return t.name===e.deletedName})).id,t.next=4,e.$store.dispatch("deleteWaste",n);case 4:return t.next=6,e.getAllWastes();case 6:e.$message("Категория успешно удалена!"),e.deletedName="",t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),e.$message("Произошла ошибка!"),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},getAllWastes:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("allWastes");case 2:n=t.sent,e.allWastes=n.filter((function(t){return t.category.id==e.id}));case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.nameCategory='"'+e.categories.filter((function(t){return t.id==e.id}))[0].name+'"'}catch(n){console.log(n),e.nameCategory=""}return t.next=3,e.getAllWastes();case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()}}),o=l,i=n("2877"),u=n("fe09"),d=Object(i["a"])(o,a,r,!1,null,"17d89d60",null);t["default"]=d.exports;d.options.components=Object.assign(Object.create(d.options.components||null),d.options.components||{},{QInput:u["a"],QTable:u["b"]})}}]);
//# sourceMappingURL=chunk-2d0c1d78.8600c8c9.js.map