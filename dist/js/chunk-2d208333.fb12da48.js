(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d208333"],{a47a:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.loading?s("Loader"):s("div",[s("h4",[t._v("Список учреждений")]),s("DistrictList",{attrs:{districts:t.districts}}),s("br"),s("div",{staticClass:"q-gutter-md"},[s("button",{staticClass:"btn waves-effect waves-light",on:{click:function(e){t.dialog=!0}}},[t._v(" Мастер выгрузки ")]),s("button",{staticClass:"btn waves-effect waves-light",on:{click:t.toCreateSchool}},[t._v(" Добавить учреждение ")])]),s("div",{staticClass:"q-pa-md q-gutter-sm"},[s("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("q-card",{staticClass:"bg-teal-7 text-white"},[s("q-card-section",{staticClass:"row items-center q-pb-none"},[s("div",{staticClass:"text-h6"},[t._v("Мастер выгрузки")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",dense:""}})],1),s("q-separator",{attrs:{color:"teal-10"}}),s("q-card-section",{staticClass:"q-pt-md-lg"},[s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"q-gutter-xs row inline items-baseline"},[s("div",{staticClass:"text"},[t._v("Поля")]),s("div",{staticClass:"column"},[s("q-checkbox",{staticClass:"col",attrs:{label:"Основные сведения",color:"orange"},model:{value:t.isMainInfo,callback:function(e){t.isMainInfo=e},expression:"isMainInfo"}}),t.isMainInfo?s("div",{staticClass:"col",staticStyle:{height:"250px",width:"250px"}},t._l(t.mainInfo,(function(e,a,i){return s("q-checkbox",{key:i,staticClass:"col",attrs:{color:"orange",label:e,value:t.mainStates[a]},model:{value:t.mainStates[a],callback:function(e){t.$set(t.mainStates,a,e)},expression:"mainStates[key]"}})})),1):t._e()],1),s("div",{staticClass:"column inline items-baseline"},[s("q-checkbox",{staticClass:"col",attrs:{label:"Cведения о здании",color:"orange"},model:{value:t.isBuildInfo,callback:function(e){t.isBuildInfo=e},expression:"isBuildInfo"}}),t.isBuildInfo?s("div",{staticClass:"col",staticStyle:{height:"250px",width:"250px"}},t._l(t.buildInfo,(function(e,a){return s("q-checkbox",{key:a,staticClass:"col",attrs:{color:"orange",label:e,value:t.buildStates[a]},model:{value:t.buildStates[a],callback:function(e){t.$set(t.buildStates,a,e)},expression:"buildStates[key]"}})})),1):t._e()],1),s("div",{staticClass:"column inline items-baseline"},[t.isBuildInfo?s("q-checkbox",{staticClass:"col",attrs:{label:"Температурный режим",color:"orange"},model:{value:t.isTempInfo,callback:function(e){t.isTempInfo=e},expression:"isTempInfo"}}):t._e(),t.isTempInfo?s("div",{staticClass:"col"},[s("q-input",{class:{invalid:t.dateStart>(new Date).toISOString().substr(0,10)},attrs:{filled:"",type:"date",hint:"Начало периода",autofocus:"","error-message":t.dateStart>(new Date).toISOString().substr(0,10)?"Некорректная дата!":"",error:t.dateStart>(new Date).toISOString().substr(0,10)},model:{value:t.dateStart,callback:function(e){t.dateStart=e},expression:"dateStart"}}),s("q-input",{class:{invalid:t.dateEnd>(new Date).toISOString().substr(0,10)||t.dateEnd<t.dateStart},attrs:{filled:"",type:"date",hint:"Конец периода",autofocus:"","error-message":t.dateEnd>(new Date).toISOString().substr(0,10)||t.dateEnd<t.dateStart?"Некорректная дата!":"",error:t.dateEnd>(new Date).toISOString().substr(0,10)||t.dateEnd<t.dateStart},model:{value:t.dateEnd,callback:function(e){t.dateEnd=e},expression:"dateEnd"}}),s("q-checkbox",{staticClass:"col",attrs:{label:"Температура теплонагревателя",color:"orange"},model:{value:t.coolant_temperature,callback:function(e){t.coolant_temperature=e},expression:"coolant_temperature"}}),s("q-checkbox",{staticClass:"col",attrs:{label:"Температурный воздуха",color:"orange"},model:{value:t.air_temperature,callback:function(e){t.air_temperature=e},expression:"air_temperature"}})],1):t._e()],1)]),s("br"),s("div",{staticClass:"q-gutter-xs row inline items-baseline"},[s("div",{staticClass:"text"},[t._v("Фильтры")]),s("div",{staticClass:"column inline items-baseline"},[s("q-checkbox",{staticClass:"col",attrs:{label:"Районы",color:"orange"},model:{value:t.isDistrictInfo,callback:function(e){t.isDistrictInfo=e},expression:"isDistrictInfo"}}),t.isDistrictInfo?s("div",{staticClass:"col",staticStyle:{height:"250px",width:"250px"}},t._l(t.districtInfo,(function(e,a){return s("q-checkbox",{key:a,staticClass:"col",attrs:{color:"orange",label:e,value:t.districtStates[a]},model:{value:t.districtStates[a],callback:function(e){t.$set(t.districtStates,a,e)},expression:"districtStates[key]"}})})),1):t._e()],1)])]),s("button",{staticClass:"btn waves-effect waves-light",on:{click:function(e){return e.preventDefault(),t.sendInfo(e)}}},[t._v(" Послать ")])])],1)],1)],1)],1)],1)},i=[],n=(s("b64b"),s("96cf"),s("1da1")),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",t._l(t.districts,(function(e){return s("li",{key:e.name["id"]},[s("q-expansion-item",{attrs:{label:e.name["name"]}},t._l(e["schools"],(function(e){return s("router-link",{key:e["INN"],attrs:{to:"/schoolcard/"+e["INN"]}},[t._v(" "+t._s(e["shortname"])+" "),s("br")])})),1)],1)})),0)])},o=[],c=(s("4160"),s("b0c0"),s("159b"),{data:function(){return{distrs:[]}},props:{districts:{type:Array}},name:"DistrictList",created:function(){var t=this;this.districts.forEach((function(e){t.distrs.push(e.name["name"])}))}}),l=c,d=s("2877"),u=s("fe09"),p=Object(d["a"])(l,r,o,!1,null,"64fe8282",null),f=p.exports;p.options.components=Object.assign(Object.create(p.options.components||null),p.options.components||{},{QExpansionItem:u["h"]});var m={name:"Districts",components:{DistrictList:f},data:function(){return{districts:[],test:[],mainInfo:{},buildInfo:{},districtInfo:{},mainStates:{},buildStates:{},districtStates:{},isMainInfo:!1,isTempInfo:!1,isBuildInfo:!1,isDistrictInfo:!1,loading:!0,error:!1,dialog:!1,dateStart:"",dateEnd:"",coolant_temperature:!0,air_temperature:!0,model:{}}},methods:{exportData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("exportInfo");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},sendInfo:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,s={},t.isBuildInfo&&(s["building"]=t.buildStates),t.isMainInfo&&(s["school"]=t.mainStates),t.isTempInfo&&(s["temperature"]={start:t.dateStart,end:t.dateEnd,air_temperature:t.air_temperature,coolant_temperature:t.coolant_temperature}),t.isDistrictInfo&&(s["filters"]={},s["filters"]["district"]=t.districtStates),Object.keys(s).length&&(t.isMainInfo||t.isBuildInfo)){e.next=10;break}alert("Для отправки выберите поля!"),e.next=12;break;case 10:return e.next=12,t.$store.dispatch("sendMainInfo",s);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))()},toCreateSchool:function(){this.$router.push("/create_school")}},beforeCreate:function(){var t=localStorage.getItem("permission");t>10&&(alert("У вас недостаточно прав!"),this.$router.push("/"))},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,localStorage.getItem("currentINN")&&localStorage.removeItem("currentINN"),e.next=4,t.$store.dispatch("fetchDistricts");case 4:return t.districts=e.sent,e.next=7,t.$store.dispatch("fetchFieldsBuilding");case 7:return t.buildInfo=e.sent,e.next=10,t.$store.dispatch("fetchFieldsDistricts");case 10:return t.districtInfo=e.sent,e.next=13,t.$store.dispatch("fetchFieldsSchool");case 13:for(s in t.mainInfo=e.sent,t.districtInfo=t.districtInfo["district"],t.districtStates=Object.assign({},t.districtInfo),t.districtStates)t.districtStates[s]=!0;for(a in t.mainStates=Object.assign({},t.mainInfo),t.mainStates)t.mainStates[a]=!0;for(i in t.buildStates=Object.assign({},t.buildInfo),t.buildInfo)t.buildStates[i]=!0;t.loading=!1,e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](0),console.log(e.t0),t.error=!0;case 28:case"end":return e.stop()}}),e,null,[[0,24]])})))()}},b=m,v=Object(d["a"])(b,a,i,!1,null,"7cf578a5",null);e["default"]=v.exports;v.options.components=Object.assign(Object.create(v.options.components||null),v.options.components||{},{QDialog:u["g"],QCard:u["c"],QCardSection:u["e"],QSpace:u["r"],QBtn:u["b"],QSeparator:u["q"],QCheckbox:u["f"],QInput:u["j"]}),v.options.directives=Object.assign(Object.create(v.options.directives||null),v.options.directives||{},{ClosePopup:u["a"]})}}]);
//# sourceMappingURL=chunk-2d208333.fb12da48.js.map